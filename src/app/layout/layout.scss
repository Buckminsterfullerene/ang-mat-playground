@layer layout {
  /*
  NOTE: This layout uses CSS Grid to create a responsive layout with a header, left sidebar, content area, and right sidebar.
  It is intended for the framework of the layout and should have minimal styling to avoid conflicts with component styles.
  Do not add background colors or other styles that may interfere with child components.
   */
  :host {
    --line-clr: oklch(0.2857 0.0116 268.86);
    //--base-clr: #11121a;
    /* Define default variable fallbacks if needed, matching the initial signal values */
    --left-sidebar-width: 15.625rem;
    --right-sidebar-width: 15.625rem;

    --header-height: 60px;
  }

  .grid-container {
    display: grid;
    /* Three columns: Left, Content (1fr), Right */
    //grid-template-columns: var(--left-sidebar-width, 250px) 1fr var(--right-sidebar-width, 250px);
    /* Two columns: Left, Content (1fr) */
    //grid-template-columns: var(--left-sidebar-width, 15.625rem) 1fr;
    grid-template-columns: var(--left-sidebar-width) 1fr 0;
    /* Two rows: header and main content/sidebars area */
    grid-template-rows: var(--header-height) 1fr;
    /* Assign names to grid areas for easier placement (3 columns wide) */
    //grid-template-areas:
    //  "header header"
    //  "left-sidebar content";
    grid-template-areas:
    "header header header"
    "left-sidebar content right-sidebar";

    min-height: 100vh;
    min-height: 100dvh;
    width: 100%;
    /* Transition applies to both dynamic widths now */
    transition: grid-template-columns 300ms cubic-bezier(0.4, 0, 0.2, 1);

    &.show-right {
      // Only expand this column when the state is visible and not hidden
      grid-template-columns: var(--left-sidebar-width) 1fr var(--right-sidebar-width);
    }
  }

  .header-container {
    grid-area: header;
    position: sticky;
    top: 0;
    z-index: 1000; // Ensure it stays above sidebar and content
    height: var(--header-height);
  }

  .left-sidebar-container {
    /* Assign to the specific left area name */
    grid-area: left-sidebar;
    border-right: 1px solid var(--line-clr);
    //background-color: var(--base-clr);
    display: flex;
    flex-direction: column;

    // Ensure the sidebar is also sticky so it doesn't scroll away
    position: sticky;
    top: var(--header-height);
    height: calc(100vh - var(--header-height));
    overflow-y: hidden;
  }

  .right-sidebar-container {
    /* Assign to the specific right area name */
    grid-area: right-sidebar;
    /* Border is now on the left side of the right container */
    //border-left: 1px solid var(--line-clr);

    /* Using transparent border prevents layout shift when switching classes */
    border-left: 1px solid transparent;
    transition: border-color 300ms;

    /* overflow: hidden prevents the internal component width from
       forcing an X-scrollbar during the grid-column transition */
    overflow: hidden;

    position: sticky;
    top: var(--header-height);
    height: calc(100vh - var(--header-height));
    // Default (Sidebar Hidden): Hide it visually
    display: flex;
    flex-direction: column;

    .show-right & {
      border-left: 1px solid var(--line-clr);
    }
  }

  // State: When sidebar IS visible, override 'display: none'
  .grid-container.show-right .right-sidebar-container {
    display: flex;
    flex-direction: column;
  }

  .content {
    grid-area: content;
    // Allow content to handle its own scrolling
    overflow-y: auto;
    // Prevent content from accidentally triggering X-scrollbars
    overflow-x: hidden;
  }

  @media (max-width: 800px) {
    .grid-container {
      /* Small Viewport: Content takes up 100% width, sidebars have 0 width */
      grid-template-columns: 1fr;
      width: 100%;

      /* Redefine grid areas so header and content span all columns */
      grid-template-areas:
      "header header header"
      ". content ."; /* Sidebars are effectively hidden as they have no column width */

      .left-sidebar-container, .right-sidebar-container {
        display: contents;
      }
    }

    /* Optional: Ensure the sidebar containers themselves do not take up space or show borders/backgrounds */
    .left-sidebar-container,
    .right-sidebar-container {
      display: contents; /* Makes children (your components) flow into the content area, or hides them if they have their own media queries */
      /* Alternatively, you can use visibility: hidden; if display: contents causes issues with child component media queries */
    }

    /* The left-sidebar component's internal media query handles moving its menu to the bottom fixed position */
    /* The right-sidebar component's internal media query already hides it (based on your description) */
  }
}
